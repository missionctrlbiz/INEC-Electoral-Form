# Turn on the rewrite engine
RewriteEngine On

# Ensure the server can find the base directory of the site
RewriteBase /

# ----------------------------------------------------------------------
# Rule 1: Remove .php extension from URL
# ----------------------------------------------------------------------
# If a request is made for a URL that does NOT have a file extension
# AND a file with that name plus .php exists...
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME}\.php -f
# ...then silently serve the .php file.
RewriteRule ^(.*)$ $1.php [L]

# ----------------------------------------------------------------------
# Rule 2: Redirect requests for .php files to the clean URL
# ----------------------------------------------------------------------
# If a user explicitly types "page.php"...
RewriteCond %{THE_REQUEST} \s/+(.+?)\.php[\s?] [NC]
# ...then perform a 301 permanent redirect to the clean "page" URL.
RewriteRule ^ /%1 [R=301,L]